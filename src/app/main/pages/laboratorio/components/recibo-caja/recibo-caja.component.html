<p-card>
    
    <p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>

    <!-- Dialog 0 -->
    <p-dialog header="Agregar Recibo de Caja" [(visible)]="modal" [style]="{ width: '60vw' }">
        <!--ANDRES MONTOYA-->

        <!-- HEADER -->
        <div class="header-card">
            <div class="header-img">
                <img alt="Card" src="../../../../../../assets/img/epn.png" />
            </div>
            <div class="header-container">
                <h4>ESCUELA POLITECNICA NACIONAL</h4>
                <p>
                    Campus Politecnico "J. Ruben Orellana R."<br />
                    Ladron de Guevara E11-253 y Andalucia<br />
                    Telf.: 2507-144 / Fax: 2567-848<br />
                    P.O. Box: 17-01-2759 / QUITO-ECUADOR<br />
                </p>
            </div>
            <div class="header-recibo">
                <div class="recibo-caja">
                    <h1>RECIBO DE CAJA</h1>
                    <h3>Nro. 132-123-12345</h3>
                </div>
            </div>
        </div>

        <br />
        <!-- BUSQUEDA -->
        <div class="fieldset-search">
            <fieldset class="search-border">
                <legend>Buscar Cliente/Estudiante/Empleado EPN</legend>

                <div class="search">
                    <div class="flex flex-wrap gap-3">
                        <div class="flex align-items-center">
                            <p-radioButton name="cliente" value="1" inputId="1"></p-radioButton>
                            <label class="ml-2">Estudiante</label>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="cliente" value="2" inputId="2"></p-radioButton>
                            <label class="ml-2">Cliente</label>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="cliente" value="2" inputId="2"></p-radioButton>
                            <label class="ml-2">Empleado EPN</label>
                        </div>
                        <div class="caja-boton-principal">
                            <button pButton label="Buscar" class="p-button p-button-lg m-1 p-button-info bg-blue-900"
                                pTooltip="Buscar" (click)="abrirmodal2()" tooltipPosition="right"></button>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>

        <!-- TABLA DATOS -->
        <div class="fieldset-data">
            <fieldset style="border: 1px solid rgba(128, 128, 128, 0.642)">
                <div class="data">
                    <div class="p-formgrid grid">
                        <div class="col-12 md:col-6 mb-0">
                            <h4>* Recibe de:</h4>
                        </div>

                        <div class="col-12 md:col-6 mb-0">
                            <h4>* Ruc/Cedula:</h4>
                        </div>
                    </div>
                    <div class="p-formgrid grid">
                        <div class="col-12 md:col-6 mb-0">
                            <h4>* Direccion:</h4>
                        </div>
                        <div class="col-12 md:col-6 mb-0">
                            <h4>* Forma Pago:</h4>
                        </div>
                    </div>
                    <div class="p-formgrid grid">
                        <div class="col-12 md:col-6 mb-0">
                            <h4>* F/Emision:</h4>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>

        <p-toolbar class="center-button">
            <button pButton label="Agregar" class="p-button p-button-lg m-1 p-button-info bg-blue-900" icon="pi pi-plus"
                type="submit" pTooltip="Agregar" tooltipPosition="right" (click)="abrirmodal1()"></button>
        </p-toolbar>

        <!-- TABLA DIALOG -->

        <p-table styleClass="p-datatable-gridlines" [tableStyle]="{ 'min-width': '50rem' }">
            <ng-template pTemplate="header">
                <tr>
                    <th>Concepto</th>
                    <th>Cantidad</th>
                    <th>V/Unitario</th>
                    <th>Inicio</th>
                    <th>Fin</th>
                    <th>Total</th>
                    <th>Acciones</th>
                </tr>
                <tr>
                    <th colspan="4"></th>
                    <th>SUBTOTAL:</th>
                    <th>0.0</th>
                    <th></th>
                </tr>

                <tr>
                    <th colspan="4"></th>
                    <th>
                        IVA <input style="width: 5em;" type="text" name="IVA" placeholder="0.0" /> %
                    </th>
                    <th>
                        <input type="text" style="width: 5em;" name="IVA" placeholder="0.0" />
                    </th>
                    <th></th>
                </tr>
                <tr>
                    <th colspan="4"></th>
                    <th>TOTAL:</th>
                    <th>0.0</th>
                    <th></th>
                </tr>
            </ng-template>
        </p-table>

        <div class="fieldset-obser">
            <fieldset class="obser">
                <label> Observaciones: </label>
                <div class="p-formgrid grid">
                    <div class="col-12">
                        <span class="p-float-label">
                            <textarea pInputTextarea rows="1" id="ftxt-descCentroCosto" required="true"></textarea>
                        </span>
                    </div>
                </div>
            </fieldset>
        </div>

        <!-- BOTONES -->
        <div align="center" class="flex justify-content-center">
            <div class="caja-boton-principal">
                <button pButton label="Guardar" class="m-1 bg-blue-900" pTooltip="Guardar"
                    tooltipPosition="right"></button>

                <button pButton label="Pagos(s)" class="m-1 bg-blue-900" pTooltip="Pagos(s)"
                    tooltipPosition="right"></button>

                <button pButton label="Cancelar" class="m-1 bg-blue-900" pTooltip="Cancelar" tooltipPosition="right"
                    (click)="cerrar()"></button>
            </div>
        </div>
    </p-dialog>

    <!-- Dialog Agregar Destalle Recibo-->
    <p-dialog header="Agregar Detalle Recibo caja" [(visible)]="modal1" [style]="{ width: '67vw' }">
        <div class="p-fluid p-formgrid grid input">
            <div class="md:col-5">
                <span class="p-float-label">
                    <div class="fieldset-conceptos">
                        <fieldset class="search-conceptos">
                            <legend>Conceptos</legend>
                            <p-table #dt1 selectionMode="single" dataKey="id" [tableStyle]="{ 'min-width': '20rem' }"
                                [rows]="4" [paginator]="true" stateStorage="session" stateKey="statedemo-session">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>
                                            <bold style="font-weight: bold">&#8470;</bold>
                                        </th>
                                        <th>
                                            <input pInputText type="text" placeholder="Concepto" />
                                        </th>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </fieldset>
                    </div>
                </span>
            </div>

            <div class="md:col-6">
                <span class="p-float-label">
                    <div class="fielset-infConceptos">
                        <fieldset class="search-infConceptos">
                            <legend>Informacion de Conceptos</legend>
                            <div class="p-fluid p-formgrid grid input">
                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <input pInputText id="ftxt-nombreCentroCosto" required="true" />
                                        <label>* Nombre: </label>
                                    </span>
                                </div>

                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <input pInputText id="ftxt-nombreCentroCosto" required="true" type="number" />
                                        <label>* Precio Unitario:</label>
                                    </span>
                                </div>
                            </div>
                            <div class="p-fluid p-formgrid grid">
                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <label>* Stock:</label>
                                    </span>
                                </div>
                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <input pInputText id="ftxt-nombreCentroCosto" required="true" type="number" />
                                        <label>* Cantidad:</label>
                                    </span>
                                </div>
                            </div>
                            <div class="p-fluid p-formgrid grid">
                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <label>* Inicio:</label>
                                    </span>
                                </div>
                                <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                                    <span class="p-float-label">
                                        <input pInputText id="ftxt-nombreCentroCosto" required="true" type="number" />
                                        <label>* Fin:</label>
                                    </span>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </span>
            </div>
        </div>

        <fieldset class="search-saew">
            <legend>Sanciones Saew</legend>
            <p-table styleClass="p-datatable-gridlines" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Codigo</th>
                        <th>Cedula</th>
                        <th>Gestion</th>
                        <th>Carrera</th>
                    </tr>
                </ng-template>
            </p-table>
        </fieldset>

        <br />
        <div align="center" class="flex justify-content-center">
            <div class="caja-boton-principal">
                <button pButton label="Guardar" class="m-1 bg-blue-900" pTooltip="Guardar"
                    tooltipPosition="right"></button>
                <button pButton label="Cancelar" class="m-1 bg-blue-900" pTooltip="Cancelar" tooltipPosition="right"
                    (click)="cerrarmodal1()"></button>
            </div>
        </div>
    </p-dialog>

    <!-- Dialog Buscar -->

    <p-dialog header="Buscar" [(visible)]="modal2" [style]="{ width: '65vw' }">
        <div class="fieldset-search2">
            <fieldset class="search-border2">
                <legend>Buscar</legend>
                <div class="search">
                    <div class="flex flex-wrap gap-3">
                        <div class="flex align-items-center">
                            <label class="ml-2">Apellidos: </label>
                            <input pInputText id="ftxt-nombreCentroCosto" required="true" type="number" />
                        </div>
                        <div class="flex align-items-center">
                            <label class="ml-2">C.l: </label>
                            <input pInputText id="ftxt-nombreCentroCosto" required="true" type="number" />
                        </div>
                        <div class="caja-boton-principal">
                            <button pButton label="Buscar" class="p-button p-button-lg m-1 p-button-info bg-blue-900"
                                pTooltip="Buscar" (click)="abrirmodal4()" tooltipPosition="right"></button>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </p-dialog>

    <!-- Dialog Tabla Buscar -->

    <p-dialog header="Lista" [(visible)]="modal4" [style]="{ width: '65vw' }">
        <div>
            <p-table class="search-saew" [lazy]="true" dataKey="id" styleClass="p-datatable-gridlines"
                [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true" [rows]="10">
                <ng-template pTemplate="caption"> Empleados</ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Empleados</th>
                        <th>CL</th>
                        <th>Direccion</th>
                        <th>Fono</th>
                        <th>Acciones</th>
                    </tr>
                    <tr>
                        <th>
                            <p-columnFilter type="text" field="name"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="text" field="name"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="text" field="name"></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter type="text" field="name"></p-columnFilter>
                        </th>
                        <th></th>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-dialog>

    <!-- TABLA y FORMULARIO-->
    <div>

        <app-buscar-recibos></app-buscar-recibos>

        <p-divider></p-divider>

        <div class="caja-boton-principal center-button">
            <button pButton label="Agregar Recibo de Caja" (click)="abrirmodal()"
                class="p-button p-button-lg m-1 p-button-info bg-blue-900" icon="pi pi-plus" pTooltip="Agregar"
                tooltipPosition="right"></button>
        </div>

        <p-divider></p-divider>
        
        <app-recibo-caja-table> </app-recibo-caja-table>
    </div>
</p-card>
