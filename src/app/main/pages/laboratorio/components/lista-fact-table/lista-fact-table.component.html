
<p-dialog header="Agregar Nota de Credito" [(visible)]="modal" [style]="{ width: '60vw' }">
    <div class="header-card">
        <div class="header-img">
            <img alt="Card" src="../../../../../../assets/img/epn.png" />
        </div>
        <div class="header-container">
            <h4>ESCUELA POLITECNICA NACIONAL</h4>
            <p>
                Campus Politecnico "J. Ruben Orellana R."<br />
                Ladron de Guevara E11-253 y Andalucia<br />
                Telf.: 2507-144 / Fax: 2567-848<br />
                P.O. Box: 17-01-2759 / QUITO-ECUADOR<br />
            </p>
        </div>
        <div class="header-nota">
            <div class="nota-credito">
                <h1>NOTA DE CREDITO</h1>
                <h3>Nro. 001-001-0000004190</h3>
            </div>
        </div>
    </div>
    <p-divider></p-divider>

    <p-fieldset>
        <div class="p-fluid p-formgrid grid input">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">F./ Emision:
                    </label>
                </span>
            </div>
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Facultad/Instituto:</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Empresa:</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Se√±or(s):</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">RUC/CI:</label>
                </span>
            </div>
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Forma Pago:</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Direccion:</label>
                </span>
            </div>
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Cheque No.:</label>
                </span>
            </div>
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Valor Total:</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Telf:</label>
                </span>
            </div>
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-nombreCentroCosto">Factura No.:</label>
                </span>
            </div>
        </div>
        <div class="p-fluid p-formgrid grid">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <label for="ftxt-fechaBancos">Email:</label>
                </span>
            </div>

        </div>
        <div class="p-fluid p-formgrid grid" style="margin-left: 5px;">
            <div class="p-field col-12 md:col-6 md:mb-4 mb-0 px-3">
                <span class="p-float-label">
                    <textarea pInputText rows="1" id="ftxt-descCentroCosto" required="true"
                        formControlName="descCentroCosto"></textarea>
                    <label style="color: rgba(0, 0, 0, 0.6)" for="ftxt-descCentroCosto">Motivo:</label>
                </span>
            </div>
        </div>
    </p-fieldset>

    <p-table styleClass="p-datatable-gridlines" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th>Codigo</th>
                <th>Descripcion</th>
                <th>Cantidad</th>
                <th>Precio Unit.</th>
                <th>Valor Total</th>
            </tr>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            <tr>
                <th colspan="3"></th>
                <th>SUBTOTAL:</th>
                <th></th>
            </tr>
            <tr>
                <th colspan="3"></th>
                <th>IVA 0%</th>
                <th></th>
            </tr>
            <tr>
                <th colspan="3"></th>
                <th>DESCUENTO:</th>
                <th></th>
            </tr>
            <tr>
                <th colspan="3"></th>
                <th>TOTAL:</th>
                <th></th>
            </tr>
        </ng-template>
    </p-table>
    <br>
    <div align="center" class="flex justify-content-center">
        <div class="caja-boton-principal">
            <button pButton label="Guardar" class="p-button p-button-lg m-1 p-button-info bg-blue-900"
                pTooltip="Guardar" tooltipPosition="right"></button>

            <button pButton label="Cancelar" class="p-button p-button-lg m-1 p-button-info bg-blue-900"
                pTooltip="Cancelar" tooltipPosition="right" (click)="cerrar()"></button>
        </div>
    </div>
</p-dialog>



<p-table #dt [value]="listFactura" [rows]="10" [paginator]="true" [loading]="loading" 
responsiveLayout="scroll" [(selection)]="selectedFacturas" [rowHover]="true" dataKey="idFactura"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros" [showCurrentPageReport]="true">
    <ng-template pTemplate="caption">
        <div class="text-center">
            <label class="text-center">NOTAS DE CREDITO</label>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="idFactura">
                <div class="flex justify-content-between align-items-center">ID Factura
                    <p-sortIcon field="idFactura"></p-sortIcon>
                    <p-columnFilter type="text" field="idFactura" display="menu"></p-columnFilter>
                </div>
            </th>

            <th pSortableColumn="idProforma">
                <div class="flex justify-content-between align-items-center">ID Proforma
                    <p-sortIcon field="idProforma"></p-sortIcon>
                    <p-columnFilter type="text" field="idProforma" display="menu"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="rucConsumidor">
                <div class="flex justify-content-between align-items-center">CI/RUC
                    <p-sortIcon field="rucConsumidor"></p-sortIcon>
                    <p-columnFilter type="text" field="rucConsumidor" display="menu"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="nombreConsumidor">
                <div class="flex justify-content-between align-items-center">Cliente
                    <p-sortIcon field="nombreConsumidor"></p-sortIcon>
                    <p-columnFilter type="text" field="nombreConsumidor" display="menu"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="fechaFact">
                <div class="flex justify-content-between align-items-center">Fecha
                    <p-sortIcon field="fechaFact"></p-sortIcon>
                    <p-columnFilter type="text" field="fechaFact" display="menu"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="totalFact">
                <div class="flex justify-content-between align-items-center">Total
                    <p-sortIcon field="totalFact"></p-sortIcon>
                    <p-columnFilter type="text" field="totalFact" display="menu"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="idEstadoFact">
                <div class="flex justify-content-between align-items-center">Estado
                    <p-sortIcon field="idEstadoFact"></p-sortIcon>
                    <p-columnFilter type="text" field="idEstadoFact" display="menu"></p-columnFilter>
                </div>
            </th>
            <th>Acciones</th>
        </tr>

    </ng-template>
    <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
        <tr>
            <td>{{item.idFactura}}</td>
            <td>{{item.idProforma}}</td>
            <td>{{item.rucConsumidor}}</td>
            <td>{{item.nombreConsumidor}}</td>
            <td>{{item.fechaFact}}</td>
            <td>{{item.totalFact}}</td>
            <td> <mark [ngClass]="item.idEstadoFact == 'ACTIVO'
                          ? 'border-green-500' : 'border-red-500' ">{{item.idEstadoFact}}</mark></td>
            <td>
                <button pButton label="Nota Credito" class="p-button-rounded  p-button-text p-button-sm p-mr-2"
                    icon="pi pi-plus" type="submit" pTooltip="Nota Credito" tooltipPosition="right"
                    (click)="abrirmodal()"></button>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="summary">
        <div class="p-d-flex p-ai-center p-jc-between">
            Registros Totales: {{listFactura ? listFactura.length : 0 }}.
        </div>
    </ng-template>
</p-table>